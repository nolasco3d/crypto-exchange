import{a as y,b as v,r as p,e as c,f as e,w as _,v as x,u as o,F as h,h as g,i as k,j as w,k as b,o as n,t as i,l as S}from"./entry.2e26b5ac.js";const I=["bitcoin","ethereum","cosmos","dacxi","terra-luna-2"],C=["brl","usd"],R=y("coin",{state:()=>({loading:!1,selectedCoin:"",allCoins:I,allCurrencies:C,selectedCurr:C[0],coinsRT:[]}),actions:{toggleCoinSelected(a){if(this.selectedCoin===a){this.selectedCoin="";return}this.selectedCoin=a},async getCoinsInfo(){try{this.coinsRT=await $fetch(encodeURI(`https://api.coingecko.com/api/v3/simple/price?ids=${this.allCoins.join(",")}&vs_currencies=${this.allCurrencies.join(",")}`))}catch(a){console.log(a)}}},getters:{}}),$=e("h1",{class:"font-bold text-6xl text-center mb-6"},"Crypto",-1),T={class:"mb-5"},V=e("span",null,"Selected currency",-1),j={class:"carousel carousel-center mx-4 p-4 space-x-4 bg-gray-100 rounded-box"},N={class:"card-body"},U={class:"card-title"},D={key:0},F={class:"uppercase"},B={class:"card-actions justify-end"},E=["onClick"],M={key:0,class:""},L={class:"card card-bordered mx-4"},O={class:"card-body"},P=e("div",{class:"card-title text-center"},"Check value",-1),q={class:"block"},z=e("span",{class:"text-gray-700"},"Date",-1),A={class:"block"},G=e("span",{class:"text-gray-700"},"Price",-1),K=v({__name:"index",setup(a){const t=R();let m=p(null),l=p(0);t.getCoinsInfo(),setInterval(async()=>{console.log("Update prices!"),await t.getCoinsInfo()},3e4);async function f(u){const r=u.target.value.split("-").reverse().join("-"),s=await $fetch(`https://api.coingecko.com/api/v3/coins/${t.selectedCoin}/history?date=${r}`);m.value=s,l.value=s.market_data.current_price[t.selectedCurr].toFixed(2)}return(u,r)=>(n(),c("div",null,[$,e("div",T,[V,_(e("select",{"onUpdate:modelValue":r[0]||(r[0]=s=>o(t).selectedCurr=s),class:"block mt-1 rounded-md bg-gray-100 border-transparent focus:border-gray-500 focus:bg-white focus:ring-0"},[(n(!0),c(h,null,g(o(t).allCurrencies,(s,d)=>(n(),c("option",{class:"text-",key:d},i(s),1))),128))],512),[[x,o(t).selectedCurr]])]),e("div",j,[(n(!0),c(h,null,g(o(t).allCoins,(s,d)=>(n(),c("div",{class:"carousel-item card bg-white w-[250px] shadow-md ml-4",key:d},[e("div",N,[e("h2",U,i(s),1),o(t).coinsRT[s]?(n(),c("span",D,[e("strong",F,"$"+i(o(t).selectedCurr),1),S(" "+i(o(t).coinsRT[s][o(t).selectedCurr].toFixed(2)),1)])):b("",!0),e("div",B,[e("button",{onClick:H=>o(t).toggleCoinSelected(s),class:"btn btn-primary"}," Consult history ",8,E)])])]))),128))]),o(t).selectedCoin?(n(),c("section",M,[e("div",L,[e("div",O,[P,e("label",q,[z,e("input",{type:"date",class:"mt-1 block w-full rounded-md bg-gray-100 border-transparent focus:border-gray-500 focus:bg-white focus:ring-0",placeholder:"",onInput:f},null,32)]),e("label",A,[G,_(e("input",{"onUpdate:modelValue":r[1]||(r[1]=s=>w(l)?l.value=s:l=s),type:"number",class:"mt-1 block w-full rounded-md bg-gray-100 border-transparent focus:border-gray-500 focus:bg-white focus:ring-0",placeholder:"",disabled:""},null,512),[[k,o(l)]])])])])])):b("",!0)]))}});export{K as default};
